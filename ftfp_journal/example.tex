\documentclass[11pt]{article}

\usepackage{fullpage, caption, subcaption, amsmath}

\input{macros.tex}
\begin{document}
Here we give an example showing the execution of the
partition algorithm. In the FTFP instance, there are $4$
sites and $4$ clients. All sites have facility opening cost
$f_i=1$ for $i=1,2,3,4$. All $d_{ij}=1$ for $i=1,\ldots,4,\;
j=1,\ldots,4$ except that $d_{11} = d_{22} = d_{33} = d_{44}
= 3$. The demands are $r_1=1, r_2=r_3=r_4=2$.

Solving the LP, we obtain the following fractional solution.
\begin{table}[ht]
  \begin{subtable}{0.5\textwidth}
  \centering
  \begin{tabular}{c | c c c c}
    $y_i^\ast$ & 1 & 2 & 3 & 4\\
    \hline
    & 4/3 & 1/3 & 1/3 & 1/3\\
  \end{tabular}
  \subcaption{}
\end{subtable}
%
\begin{subtable}{0.5\textwidth}
  \centering
  \begin{tabular}{c | c c c c}
    $x_{ij}^\ast$ & $j=1$ & 2 & 3 & 4\\
    \hline
    $i=1$ & 0 & 4/3 & 4/3 & 4/3\\
    2 & 1/3 & 0 & 1/3 & 1/3\\
    3 & 1/3 & 1/3 & 0 & 1/3\\
    4 & 1/3 & 1/3 & 1/3 & 0\\
  \end{tabular}
  \subcaption{}
\end{subtable}
\caption{An optimal fractional solution to the FTFP instance.}
\end{table}

It is easily seen that the fractional solution above is optimal and
complete ($x_{ij}^\ast > 0$ implies $x_{ij}^\ast = y_i^\ast$). The
dual optimal solution has all $\alpha_j^\ast = 4/3$ for
$j=1,2,3,4$. Now we perform the adaptive partition algorithm,
consisting of two phases. Phase 1, the partition phase, has 2
iterations. In the first iteration we might pick client $1$ and create
a primary demand $\kappa_{11}$ for it. We also create one facility at
each of the 4 sites, denoted as $\mu_{11}, \mu_{21}, \mu_{31},$ and
$\mu_{41}$. The neighborhood $\wbarN(\kappa_{11}) =
\{\mu_{21},\mu_{31},\mu_{41}\}$. All other clients have their
$\wtildeN(j)$ overlap with $\wbarN(\kappa_{11})$, so each of client
$2,3$ and $4$ has a demand created and assigned to $\kappa_{11}$. To
maintain completeness, we split the facility at site 1 into $\mu_{11}$
and $\mu_{12}$ with $\bary_{\mu_{11}}=1/3,\; \bary_{\mu_{12}} = 1$. In
iteration 2, we could pick client $4$ and create a primary demand
$\kappa_{42}$, each of client $2$ and $3$ has one demand created and
assigned to $\kappa_{42}$. All of the three demands have $\mu_{12}$ as
the sole facility in their neighborhood. Now that all clients are
exhausted and we simply perform Phase 2, the augmenting phase to make
all demands each having total connection value equal to 1. The final
fractional solution is given below. It can be verified that all the
stated properties are satisfied.
\begin{table}[ht]
  \begin{subtable}{0.3\textwidth}
  \centering
  \begin{tabular}{c | c c c c}
    $\bary$ & 1 & 2 & 3 & 4\\
    \hline
    & 1/3 & 1/3 & 1/3 & 1/3\\
    & 1 &  &  & \\
  \end{tabular}
  \subcaption{}
\end{subtable}
%
\begin{subtable}{0.3\textwidth}
  \centering
  \begin{tabular}{c | c c c c}
    $\barx$ & 1 & 2 & 3 & 4\\
    \hline
    1 & 0 & 1/3 & 1/3 & 1/3\\
    2 & 1/3 & 0 & 1/3 & 1/3\\
    3 & 1/3 & 1/3 & 0 & 1/3\\
    4 & 1/3 & 1/3 & 1/3 & 0\\
  \end{tabular}
  \subcaption{}
\end{subtable}
%
\begin{subtable}{0.3\textwidth}
  \centering
  \begin{tabular}{c |  c c c}
    $\barx$ & 2 & 3 & 4\\
    \hline
    1  & 1 & 1 & 1\\
    2  & 0 & 0 & 0\\
    3  & 0 & 0 & 0\\
    4  & 0 & 0 & 0\\
  \end{tabular}
  \subcaption{}
\end{subtable}
\caption{
  The left table (a) is the opening fractional value $\bary_{\mu}$ for
  each facility at each site. The first row denotes the
  fractional value of the first facility in each site and
  the second row denotes that of the second.
  The middle table (b) is
  the connection value $\barx_{\mu\nu}$ for the
  first demand of each client.
  The right table (c) is the connection value for the second demand of each
  client. Notice client 1 does not have a second demand.}
\end{table}


\end{document}
